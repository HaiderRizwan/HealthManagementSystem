{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { checkAuth } from '../utils/auth';\nconst ProtectedRoute = ({\n  children,\n  requiredRole\n}) => {\n  _s();\n  const navigate = useNavigate();\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    const userRole = localStorage.getItem('userRole');\n\n    // Check if user is authenticated\n    if (!token || !checkAuth()) {\n      console.log('Authentication failed - redirecting to login');\n      navigate('/login');\n      return;\n    }\n\n    // Check user role if requiredRole is provided\n    if (requiredRole && (userRole === null || userRole === void 0 ? void 0 : userRole.toLowerCase()) !== requiredRole.toLowerCase()) {\n      console.log('Role mismatch - redirecting to login');\n      console.log('Required role:', requiredRole);\n      console.log('User role:', userRole);\n      navigate('/login');\n      return;\n    }\n  }, [navigate, requiredRole]);\n  return children;\n};\n_s(ProtectedRoute, \"0pNeyzXk/ByIxyERsdaIrG6js9s=\", false, function () {\n  return [useNavigate];\n});\n_c = ProtectedRoute;\nexport default ProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["useEffect","useNavigate","checkAuth","ProtectedRoute","children","requiredRole","_s","navigate","token","localStorage","getItem","userRole","console","log","toLowerCase","_c","$RefreshReg$"],"sources":["C:/Users/Inspire Uplift/Desktop/web/healthmanagementsystem/Health-Management-System-main/client/src/components/ProtectedRoute.js"],"sourcesContent":["import { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { checkAuth } from '../utils/auth';\n\nconst ProtectedRoute = ({ children, requiredRole }) => {\n  const navigate = useNavigate();\n  \n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    const userRole = localStorage.getItem('userRole');\n    \n    // Check if user is authenticated\n    if (!token || !checkAuth()) {\n      console.log('Authentication failed - redirecting to login');\n      navigate('/login');\n      return;\n    }\n\n    // Check user role if requiredRole is provided\n    if (requiredRole && userRole?.toLowerCase() !== requiredRole.toLowerCase()) {\n      console.log('Role mismatch - redirecting to login');\n      console.log('Required role:', requiredRole);\n      console.log('User role:', userRole);\n      navigate('/login');\n      return;\n    }\n  }, [navigate, requiredRole]);\n\n  return children;\n};\n\nexport default ProtectedRoute;"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,SAAS,QAAQ,eAAe;AAEzC,MAAMC,cAAc,GAAGA,CAAC;EAAEC,QAAQ;EAAEC;AAAa,CAAC,KAAK;EAAAC,EAAA;EACrD,MAAMC,QAAQ,GAAGN,WAAW,CAAC,CAAC;EAE9BD,SAAS,CAAC,MAAM;IACd,MAAMQ,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,MAAMC,QAAQ,GAAGF,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;;IAEjD;IACA,IAAI,CAACF,KAAK,IAAI,CAACN,SAAS,CAAC,CAAC,EAAE;MAC1BU,OAAO,CAACC,GAAG,CAAC,8CAA8C,CAAC;MAC3DN,QAAQ,CAAC,QAAQ,CAAC;MAClB;IACF;;IAEA;IACA,IAAIF,YAAY,IAAI,CAAAM,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEG,WAAW,CAAC,CAAC,MAAKT,YAAY,CAACS,WAAW,CAAC,CAAC,EAAE;MAC1EF,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAC;MACnDD,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAER,YAAY,CAAC;MAC3CO,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEF,QAAQ,CAAC;MACnCJ,QAAQ,CAAC,QAAQ,CAAC;MAClB;IACF;EACF,CAAC,EAAE,CAACA,QAAQ,EAAEF,YAAY,CAAC,CAAC;EAE5B,OAAOD,QAAQ;AACjB,CAAC;AAACE,EAAA,CAzBIH,cAAc;EAAA,QACDF,WAAW;AAAA;AAAAc,EAAA,GADxBZ,cAAc;AA2BpB,eAAeA,cAAc;AAAC,IAAAY,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}