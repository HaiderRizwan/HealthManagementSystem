{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { checkAuth } from '../utils/auth';\nconst ProtectedRoute = ({\n  children,\n  requiredRole\n}) => {\n  _s();\n  const navigate = useNavigate();\n  const token = localStorage.getItem('token');\n  console.log('Current Token:', token);\n  useEffect(() => {\n    // Check if user is authenticated\n    if (!checkAuth()) {\n      navigate('/login');\n      return;\n    }\n\n    // Check user role if requiredRole is provided\n    const userRole = localStorage.getItem('userRole');\n    console.log('Checking roles - Required:', requiredRole, 'User role:', userRole);\n    if (requiredRole && (!userRole || userRole !== requiredRole)) {\n      console.log('Role mismatch - redirecting to login');\n      navigate('/login');\n    }\n  }, [navigate, requiredRole]);\n  return children;\n};\n_s(ProtectedRoute, \"0pNeyzXk/ByIxyERsdaIrG6js9s=\", false, function () {\n  return [useNavigate];\n});\n_c = ProtectedRoute;\nexport default ProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["useEffect","useNavigate","checkAuth","ProtectedRoute","children","requiredRole","_s","navigate","token","localStorage","getItem","console","log","userRole","_c","$RefreshReg$"],"sources":["C:/Users/Inspire Uplift/Desktop/web/healthmanagementsystem/Health-Management-System-main/client/src/components/ProtectedRoute.js"],"sourcesContent":["import { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { checkAuth } from '../utils/auth';\n\nconst ProtectedRoute = ({ children, requiredRole }) => {\n  const navigate = useNavigate();\n  const token = localStorage.getItem('token');\n  \n  console.log('Current Token:', token);\n  \n  useEffect(() => {\n    // Check if user is authenticated\n    if (!checkAuth()) {\n      navigate('/login');\n      return;\n    }\n\n    // Check user role if requiredRole is provided\n    const userRole = localStorage.getItem('userRole');\n    console.log('Checking roles - Required:', requiredRole, 'User role:', userRole);\n    \n    if (requiredRole && (!userRole || userRole !== requiredRole)) {\n      console.log('Role mismatch - redirecting to login');\n      navigate('/login');\n    }\n  }, [navigate, requiredRole]);\n\n  return children;\n};\n\nexport default ProtectedRoute;"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,SAAS,QAAQ,eAAe;AAEzC,MAAMC,cAAc,GAAGA,CAAC;EAAEC,QAAQ;EAAEC;AAAa,CAAC,KAAK;EAAAC,EAAA;EACrD,MAAMC,QAAQ,GAAGN,WAAW,CAAC,CAAC;EAC9B,MAAMO,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAE3CC,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEJ,KAAK,CAAC;EAEpCR,SAAS,CAAC,MAAM;IACd;IACA,IAAI,CAACE,SAAS,CAAC,CAAC,EAAE;MAChBK,QAAQ,CAAC,QAAQ,CAAC;MAClB;IACF;;IAEA;IACA,MAAMM,QAAQ,GAAGJ,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;IACjDC,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAEP,YAAY,EAAE,YAAY,EAAEQ,QAAQ,CAAC;IAE/E,IAAIR,YAAY,KAAK,CAACQ,QAAQ,IAAIA,QAAQ,KAAKR,YAAY,CAAC,EAAE;MAC5DM,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAC;MACnDL,QAAQ,CAAC,QAAQ,CAAC;IACpB;EACF,CAAC,EAAE,CAACA,QAAQ,EAAEF,YAAY,CAAC,CAAC;EAE5B,OAAOD,QAAQ;AACjB,CAAC;AAACE,EAAA,CAxBIH,cAAc;EAAA,QACDF,WAAW;AAAA;AAAAa,EAAA,GADxBX,cAAc;AA0BpB,eAAeA,cAAc;AAAC,IAAAW,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}